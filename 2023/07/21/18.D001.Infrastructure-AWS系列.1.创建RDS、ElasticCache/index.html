<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Infrastructure-AWS系列.1.创建EC2实例、LB、RDS、ElastiCache |  xugang.xie&#39;s blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="xugang.xie's blog" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-18.D001.Infrastructure-AWS系列.1.创建RDS、ElasticCache"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Infrastructure-AWS系列.1.创建EC2实例、LB、RDS、ElastiCache
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/21/18.D001.Infrastructure-AWS%E7%B3%BB%E5%88%97.1.%E5%88%9B%E5%BB%BARDS%E3%80%81ElasticCache/" class="article-date">
  <time datetime="2023-07-20T16:00:00.000Z" itemprop="datePublished">2023-07-21</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Infrastructure/">Infrastructure</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.4k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">21 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="&#x672C;&#x7BC7;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5728;AWS&#x91CC;"><a href="#&#x672C;&#x7BC7;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5728;AWS&#x91CC;" class="headerlink" title="&#x672C;&#x7BC7;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5728;AWS&#x91CC;"></a>&#x672C;&#x7BC7;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5728;AWS&#x91CC;</h2><p>1.&#x521B;&#x5EFA;EC2&#x5B9E;&#x4F8B;&#xFF0C;&#x90E8;&#x7F72;nginx&#xFF1B;<br>2.&#x521B;&#x5EFA;EC2&#x5B9E;&#x4F8B;&#xFF0C;&#x90E8;&#x7F72;tomcat&#x3001;xxl-job&#xFF1B;<br>3.&#x4E3A;nginx&#x90E8;&#x7F72;LB&#xFF1B;<br>4.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;RDS (mysql-5.7)&#xFF1B;<br>5.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;ElastiCache (redis-5.0)&#xFF1B;</p>
<span id="more"></span>


<h2 id="1-&#x73AF;&#x5883;"><a href="#1-&#x73AF;&#x5883;" class="headerlink" title="1.&#x73AF;&#x5883;"></a>1.&#x73AF;&#x5883;</h2><p>&#x516C;&#x6709;&#x4E91;&#xFF1A;AWS Cloud<br>&#x9879;&#x76EE;&#x540D;&#x79F0;&#xFF1A;mta-swappie<br>&#x9879;&#x76EE;&#x73AF;&#x5883;&#xFF1A;UAT<br>&#x533A;&#x57DF;&#xFF1A; &#x4E9A;&#x592A;&#x5730;&#x533A;(&#x9999;&#x6E2F;) ap-east-1</p>
<p>IAM &#x6839;&#x8D26;&#x6237;&#x767B;&#x5F55;&#xFF1A; ???<br>&#x8D26;&#x6237;ID&#xFF1A;???<br>&#x7528;&#x6237;&#x540D;&#xFF1A;???<br>&#x5BC6;&#x7801;&#xFF1A;   ???</p>
<h2 id="2-&#x5B89;&#x88C5;AWS-CLI"><a href="#2-&#x5B89;&#x88C5;AWS-CLI" class="headerlink" title="2.&#x5B89;&#x88C5;AWS CLI"></a>2.&#x5B89;&#x88C5;AWS CLI</h2><p>&#x7565;</p>
<p>&#x5728;&#x8DF3;&#x677F;&#x673A;&#x4E2D;&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">su - gitlab-runner</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/.aws</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">-rw------- 1 gitlab-runner gitlab-runner  43 Jul 20 14:06 config</span><br><span class="line">-rw------- 1 gitlab-runner gitlab-runner 116 Jul 20 14:06 credentials</span><br></pre></td></tr></table></figure>

<p>&#x5DF2;&#x7ECF;&#x6709;&#x4E86;aws&#x914D;&#x7F6E;&#x4E86;&#x3002;&#x518D;&#x914D;&#x7F6E;&#x4E2A;&#x7528;&#x6237;:<br>&#x8FDB;&#x5165;&#x53F3;&#x4E0A;&#x65B9;<code>&#x8D26;&#x6237;</code>&#xFF0C;&#x4E0B;&#x62C9;&#xFF0C;&#x627E;&#x5230;&#xFF1A;<code>Security Credentials</code>&#xFF0C;&#x70B9;&#x51FB;&#x8FDB;&#x5165;<br>&#x627E;&#x5230;<code>&#x8BBF;&#x95EE;&#x5BC6;&#x94A5;</code>&#xFF0C;&#x521B;&#x5EFA;&#x8BBF;&#x95EE;&#x5BC6;&#x94A5;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230; <code>ACCESS ID</code> &#x548C; <code>Access Key</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aws_access_key_id = ???</span><br><span class="line">aws_secret_access_key = ???</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-access-key/accessKey.1.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-access-key/accessKey.2.png"></p>
<p>&#x8DF3;&#x677F;&#x673A;&#x4E0A;&#x914D;&#x7F6E;&#x591A;&#x7528;&#x6237;&#xFF0C;&#x53C2;&#x8003;<a target="_blank" rel="noopener" href="https://www.jibing57.com/2017/10/24/how-to-use-aws-cli-with-multi-user/">&#x8FD9;&#x91CC;</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">aws configure --profile devops</span></span><br><span class="line"></span><br><span class="line">&#x4EA4;&#x4E92;&#x5F0F;</span><br><span class="line">AWS Access Key ID [None]: ???</span><br><span class="line">AWS Secret Access Key [None]: ???</span><br><span class="line">Default region name [None]: ap-east-1</span><br><span class="line">Default output format [None]: json</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll ~/.aws</span></span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 gitlab-runner gitlab-runner  93 Jul 25 14:28 config</span><br><span class="line">-rw------- 1 gitlab-runner gitlab-runner 231 Jul 25 14:28 credentials</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> ~/.aws/config</span></span><br><span class="line">[default]</span><br><span class="line">region = ap-east-1</span><br><span class="line">output = json</span><br><span class="line">[profile devops]</span><br><span class="line">region = ap-east-1</span><br><span class="line">output = json</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> ~/.aws/credentials</span></span><br><span class="line">[default]</span><br><span class="line">aws_access_key_id = ???</span><br><span class="line">aws_secret_access_key = ???</span><br><span class="line">[devops]</span><br><span class="line">aws_access_key_id = ???</span><br><span class="line">aws_secret_access_key = ???</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">aws configure list</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">aws configure list-profiles</span></span><br><span class="line">default</span><br><span class="line">devops</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">aws sts get-caller-identity --profile devops</span></span><br><span class="line">{</span><br><span class="line">    &quot;UserId&quot;: &quot;AIDAV64JZYENGH2XWUBGE&quot;,</span><br><span class="line">    &quot;Account&quot;: &quot;409921503514&quot;,</span><br><span class="line">    &quot;Arn&quot;: &quot;arn:aws:iam::409921503514:user/devops&quot;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="3-&#x5B89;&#x88C5;-eksctl"><a href="#3-&#x5B89;&#x88C5;-eksctl" class="headerlink" title="3.&#x5B89;&#x88C5; eksctl"></a>3.&#x5B89;&#x88C5; eksctl</h2><p>1.&#x5728;&#x8DF3;&#x677F;&#x673A;&#x4E2D;&#x4EE5;<code>root</code>&#x7528;&#x6237;&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">yum install dpkg</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dpkg --print-architecture</span></span><br><span class="line">amd64</span><br><span class="line"></span><br><span class="line">&#x5728; /etc/sudoers &#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x589E;&#x52A0;&#x7528;&#x6237; gitlab-runner &#x7684; sudo &#x65E0;&#x5BC6;&#x7801;&#x6743;&#x9650;</span><br><span class="line">TODO</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.&#x5728;&#x8DF3;&#x677F;&#x673A;&#x4E2D;&#x4EE5; <code>gitlab-runner</code> &#x7528;&#x6237;&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">su - gitlab-runner</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">for</span> ARM systems, <span class="built_in">set</span> ARCH to: `arm64`, `armv6` or `armv7`</span></span><br><span class="line">ARCH=amd64</span><br><span class="line">PLATFORM=$(uname -s)_$ARCH</span><br><span class="line"></span><br><span class="line">curl -sLO &quot;https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">(Optional) Verify checksum</span></span><br><span class="line">curl -sL &quot;https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt&quot; | grep $PLATFORM | sha256sum --check</span><br><span class="line"></span><br><span class="line">tar -xzf eksctl_$PLATFORM.tar.gz -C /tmp &amp;&amp; rm eksctl_$PLATFORM.tar.gz</span><br><span class="line"></span><br><span class="line">sudo mv /tmp/eksctl /usr/local/bin</span><br></pre></td></tr></table></figure>

<p>&#x9A8C;&#x8BC1;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ eksctl version</span><br><span class="line">0.150.0-dev</span><br></pre></td></tr></table></figure>

<h2 id="4-&#x5B89;&#x88C5;Helm"><a href="#4-&#x5B89;&#x88C5;Helm" class="headerlink" title="4.&#x5B89;&#x88C5;Helm"></a>4.&#x5B89;&#x88C5;Helm</h2><p><a target="_blank" rel="noopener" href="https://helm.sh/zh/docs/intro/install/">https://helm.sh/zh/docs/intro/install/</a><br><a target="_blank" rel="noopener" href="https://helm.sh/zh/docs/intro/quickstart/">https://helm.sh/zh/docs/intro/quickstart/</a></p>
<p>1.&#x5728;&#x8DF3;&#x677F;&#x673A;&#x4E2D;&#x4EE5;<code>gitlab-runner</code>&#x7528;&#x6237;&#x64CD;&#x4F5C;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">su - gitlab-runner</span></span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> 700 get_helm.sh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./get_helm.sh</span></span><br><span class="line">Downloading https://get.helm.sh/helm-v3.12.2-linux-amd64.tar.gz</span><br><span class="line">Verifying checksum... Done.</span><br><span class="line">Preparing to install helm into /usr/local/bin</span><br><span class="line">helm installed into /usr/local/bin/helm</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x60F3;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x5B89;&#x88C5;&#xFF0C;&#x8FD0;&#x884C;curl <code>https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm get -h</span></span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="5-&#x5B89;&#x88C5;kubectl"><a href="#5-&#x5B89;&#x88C5;kubectl" class="headerlink" title="5.&#x5B89;&#x88C5;kubectl"></a>5.&#x5B89;&#x88C5;kubectl</h2><p>&#x7565;</p>
<p>&#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x7684;kubeconfig&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF1A;<code>/home/gitlab-runner/.kube/config-uat-aws-hk</code></p>
<p>&#x5728;&#x8DF3;&#x677F;&#x673A;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;kubectl&#x547D;&#x4EE4;&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">su - gitlabrunner</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl --kubeconfig=/home/gitlab-runner/.kube/config-uat-aws-hk -n java-service get pods</span></span><br><span class="line">NAME                                   READY   STATUS             RESTARTS   AGE</span><br><span class="line">mta-swappie-service-7747d94b99-f2sw7   1/1     Running            0          18h</span><br><span class="line">mta-swappie-service-84cc4d5d4b-7mzc6   0/1     ImagePullBackOff   0          3h31m</span><br></pre></td></tr></table></figure>

<h2 id="6-&#x521B;&#x5EFA;-web-nginx-&#x5B9E;&#x4F8B;"><a href="#6-&#x521B;&#x5EFA;-web-nginx-&#x5B9E;&#x4F8B;" class="headerlink" title="6.&#x521B;&#x5EFA; web-nginx &#x5B9E;&#x4F8B;"></a>6.&#x521B;&#x5EFA; web-nginx &#x5B9E;&#x4F8B;</h2><h3 id="&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;"><a href="#&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;" class="headerlink" title="&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;"></a>&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;</h3><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.3.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.4.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.5.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.6.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.7.png"></p>
</li>
</ol>
<h3 id="&#x4E3A;-EC2-web-nginx-&#x5206;&#x914D;&#x5F39;&#x6027;IP"><a href="#&#x4E3A;-EC2-web-nginx-&#x5206;&#x914D;&#x5F39;&#x6027;IP" class="headerlink" title="&#x4E3A; EC2: web-nginx &#x5206;&#x914D;&#x5F39;&#x6027;IP"></a>&#x4E3A; EC2: web-nginx &#x5206;&#x914D;&#x5F39;&#x6027;IP</h3><p>&#x521B;&#x5EFA;&#x5F39;&#x6027;IP<br>1.<br><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.%E5%BC%B9%E6%80%A7IP.1.png"></p>
<ol start="2">
<li><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx.%E5%BC%B9%E6%80%A7IP.2.png"></li>
</ol>
<p>&#x5F97;&#x5230;&#x5F39;&#x6027;IP&#xFF1A;18.163.150.205</p>
<h3 id="&#x5F39;&#x6027;IP&#x548C;EC2-web-nginx&#x5B9E;&#x4F8B;&#x5173;&#x8054;"><a href="#&#x5F39;&#x6027;IP&#x548C;EC2-web-nginx&#x5B9E;&#x4F8B;&#x5173;&#x8054;" class="headerlink" title="&#x5F39;&#x6027;IP&#x548C;EC2:web-nginx&#x5B9E;&#x4F8B;&#x5173;&#x8054;"></a>&#x5F39;&#x6027;IP&#x548C;EC2:web-nginx&#x5B9E;&#x4F8B;&#x5173;&#x8054;</h3><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/%E5%BC%B9%E6%80%A7IP%E5%92%8CEC2-web-nginx%E5%AE%9E%E4%BE%8B%E5%85%B3%E8%81%94.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/%E5%BC%B9%E6%80%A7IP%E5%92%8CEC2-web-nginx%E5%AE%9E%E4%BE%8B%E5%85%B3%E8%81%94.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/%E5%BC%B9%E6%80%A7IP%E5%92%8CEC2-web-nginx%E5%AE%9E%E4%BE%8B%E5%85%B3%E8%81%94.3.png"></p>
</li>
</ol>
<p>&#x5F39;&#x6027;Ip&#xFF1A;<code>18.163.150.205</code>  &#x548C; EC2&#x5B9E;&#x4F8B;&#xFF1A;<code>web-nginx</code> &#x5173;&#x8054;&#x4E86;&#x540E;&#xFF0C;ping &#x4E0B;&#x8BD5;&#x8BD5;&#xFF1A;&#x3000;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">% </span><span class="language-bash">ping 18.163.150.205</span></span><br><span class="line">PING 18.163.150.205 (18.163.150.205): 56 data bytes</span><br><span class="line">Request timeout for icmp_seq 0</span><br><span class="line">Request timeout for icmp_seq 1</span><br><span class="line">Request timeout for icmp_seq 2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>&#x53D1;&#x73B0;ping &#x4E0D;&#x901A;&#xFF0C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;<br><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/%E5%BC%B9%E6%80%A7IP-ping%E4%B8%8D%E9%80%9A%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%881.png"></p>
<p>&#x5728;&#x7F51;&#x7EDC;&#x4E0E;&#x5B89;&#x5168;&#x2013;&#x5B89;&#x5168;&#x7EC4;&#x4E2D;&#xFF0C;&#x627E;&#x5230;&#x5165;&#x7AD9;&#x7684;&#x90A3;&#x6761;&#xFF0C;&#x521B;&#x5EFA;&#x4E2A;<code>&#x6240;&#x6709;&#x6D41;&#x91CF;</code>&#x7684;<code>&#x5165;&#x7AD9;&#x89C4;</code>&#x5219;`&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">% </span><span class="language-bash">ping 18.163.150.205</span></span><br><span class="line">PING 18.163.150.205 (18.163.150.205): 56 data bytes</span><br><span class="line">64 bytes from 18.163.150.205: icmp_seq=0 ttl=236 time=67.679 ms</span><br><span class="line">64 bytes from 18.163.150.205: icmp_seq=1 ttl=236 time=75.729 ms</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="SSH-&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;"><a href="#SSH-&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;" class="headerlink" title="SSH &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;"></a>SSH &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">i-03629cc1c8b1d7e62 (web-nginx)</span><br><span class="line">&#x6253;&#x5F00; SSH &#x5BA2;&#x6237;&#x7AEF;&#x3002;</span><br><span class="line"></span><br><span class="line">&#x67E5;&#x627E;&#x60A8;&#x7684;&#x79C1;&#x6709;&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x3002;&#x7528;&#x4E8E;&#x542F;&#x52A8;&#x6B64;&#x5B9E;&#x4F8B;&#x7684;&#x5BC6;&#x94A5;&#x4E3A; web-nginx-rsa-pair.pem</span><br><span class="line"></span><br><span class="line">&#x5982;&#x6709;&#x9700;&#x8981;&#xFF0C;&#x8FD0;&#x884C;&#x6B64;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x60A8;&#x7684;&#x5BC6;&#x94A5;&#x4E0D;&#x516C;&#x5F00;&#x53EF;&#x89C1;&#x3002;</span><br><span class="line"> chmod 400 web-nginx-rsa-pair.pem</span><br><span class="line"></span><br><span class="line">&#x901A;&#x8FC7;&#x5176; &#x516C;&#x6709; DNS &#x8FDE;&#x63A5;&#x5230;&#x60A8;&#x7684;&#x5B9E;&#x4F8B;:</span><br><span class="line"> ec2-43-198-199-170.ap-east-1.compute.amazonaws.com</span><br><span class="line"></span><br><span class="line">&#x793A;&#x4F8B;:</span><br><span class="line"></span><br><span class="line"> ssh -i &quot;web-nginx-rsa-pair.pem&quot; ec2-user@ec2-43-198-199-170.ap-east-1.compute.amazonaws.com</span><br></pre></td></tr></table></figure>

<h4 id="1-&#x4E2A;&#x4EBA;&#x5F00;&#x53D1;MacOS&#x4E0A;&#xFF1A;"><a href="#1-&#x4E2A;&#x4EBA;&#x5F00;&#x53D1;MacOS&#x4E0A;&#xFF1A;" class="headerlink" title="1.&#x4E2A;&#x4EBA;&#x5F00;&#x53D1;MacOS&#x4E0A;&#xFF1A;"></a>1.&#x4E2A;&#x4EBA;&#x5F00;&#x53D1;MacOS&#x4E0A;&#xFF1A;</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">chmod 400 web-nginx-rsa-pair.pem</span><br><span class="line"></span><br><span class="line">//&#x4E34;&#x65F6;&#x65B9;&#x6848;&#xFF0C;&#x56E0;&#x4E3A;&#x57DF;&#x540D;&#x4F1A;&#x53D8;&#xFF0C;&#x540E;&#x9762;&#x6709;&#x4E86;&#x5F39;&#x6027;IP&#xFF0C;&#x5C31;&#x7528;&#x56FA;&#x5B9A;&#x7684;&#x5F39;&#x6027;IP</span><br><span class="line">ssh -i &quot;web-nginx-rsa-pair.pem&quot; ec2-user@ec2-43-198-199-170.ap-east-1.compute.amazonaws.com</span><br></pre></td></tr></table></figure>

<h4 id="2-&#x7528;&#x5F39;&#x6027;IP-&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#xFF1A;"><a href="#2-&#x7528;&#x5F39;&#x6027;IP-&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#xFF1A;" class="headerlink" title="2.&#x7528;&#x5F39;&#x6027;IP &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#xFF1A;"></a>2.&#x7528;&#x5F39;&#x6027;IP &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#xFF1A;</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">ssh -i &quot;web-nginx-rsa-pair.pem&quot; ec2-user@18.163.150.205</span><br></pre></td></tr></table></figure>

<h3 id="&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;"><a href="#&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;" class="headerlink" title="&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;"></a>&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;</h3><p>&#x7528;&#x4EE5;&#x4E0A;&#x5F39;&#x6027;IP &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x533A;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sudo -i</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">date</span></span></span><br><span class="line">2023&#x5E74; 07&#x6708; 21&#x65E5; &#x661F;&#x671F;&#x4E94; 01:49:28 UTC</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl</span></span><br><span class="line">      Local time: &#x4E94; 2023-07-21 01:50:49 UTC</span><br><span class="line">  Universal time: &#x4E94; 2023-07-21 01:50:49 UTC</span><br><span class="line">        RTC time: &#x4E94; 2023-07-21 01:50:50</span><br><span class="line">       Time zone: n/a (UTC, +0000)</span><br><span class="line">     NTP enabled: yes</span><br><span class="line">NTP synchronized: yes</span><br><span class="line"> RTC in local TZ: no</span><br><span class="line">      DST active: n/a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl set-timezone Asia/Shanghai</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl</span></span><br><span class="line">      Local time: &#x4E94; 2023-07-21 09:51:26 CST</span><br><span class="line">  Universal time: &#x4E94; 2023-07-21 01:51:26 UTC</span><br><span class="line">        RTC time: &#x4E94; 2023-07-21 01:51:26</span><br><span class="line">       Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line">     NTP enabled: yes</span><br><span class="line">NTP synchronized: yes</span><br><span class="line"> RTC in local TZ: no</span><br><span class="line">      DST active: n/a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">date</span></span></span><br><span class="line">2023&#x5E74; 07&#x6708; 21&#x65E5; &#x661F;&#x671F;&#x4E94; 09:51:43 CST    </span><br></pre></td></tr></table></figure>

<h3 id="&#x5B89;&#x88C5;nginx"><a href="#&#x5B89;&#x88C5;nginx" class="headerlink" title="&#x5B89;&#x88C5;nginx"></a>&#x5B89;&#x88C5;nginx</h3><p>&#x7528;&#x4EE5;&#x4E0A;&#x5F39;&#x6027;IP &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x5B89;&#x88C5;nginx&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /proc/version</span></span><br><span class="line">Linux version 5.10.184-175.731.amzn2.x86_64 (mockbuild@ip-10-0-58-129) (gcc10-gcc (GCC) 10.4.1 20221124 (Red Hat 10.4.0-1), GNU ld version 2.35.2-9.amzn2.0.1) #1 SMP Tue Jun 27 21:48:55 UTC 2023</span><br><span class="line"></span><br><span class="line">//&#x65E0;&#x5BC6;&#x7801;&#xFF0C;&#x5207;&#x6362;&#x5230;root&#x8D26;&#x6237;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo -i</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum repolist</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum install nginx</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl <span class="built_in">enable</span> nginx</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.</span><br><span class="line"></span><br><span class="line">//&#x66F4;&#x6539;nginx&#x7684;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line">user  nginx; &#x6539;&#x6210; user  root;</span><br><span class="line"></span><br><span class="line">:wq</span><br><span class="line"></span><br><span class="line">// /usr/share/nginx/html &#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x6743;&#x9650;&#x6539;&#x6210;777</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> 777 /usr/share/nginx/html</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl restart nginx</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="&#x9636;&#x6BB5;&#x603B;&#x7ED3;"><a href="#&#x9636;&#x6BB5;&#x603B;&#x7ED3;" class="headerlink" title="&#x9636;&#x6BB5;&#x603B;&#x7ED3;"></a>&#x9636;&#x6BB5;&#x603B;&#x7ED3;</h3><p>1.EC2&#x8282;&#x70B9;&#xFF1A;web-nginx&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;<br>2.nginx&#x5DF2;&#x7ECF;&#x90E8;&#x7F72;&#x5E76;&#x542F;&#x52A8;<br>3.&#x521B;&#x5EFA;&#x4E86;&#x5F39;&#x6027;IP&#xFF1A;<code>18.163.150.205</code>&#xFF0C;&#x5E76;&#x548C;&#x5B9E;&#x4F8B;&#xFF1A;<code>web-nginx</code> &#x5173;&#x8054;<br>4.&#x6D4F;&#x89C8;&#x5668;&#x91CC;&#x8BBF;&#x95EE;nginx&#x9ED8;&#x8BA4;&#x9875;&#x9762;&#xFF1A;<code>http://18.163.150.205</code><br><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/ec2.web-nginx-80.access.png"></p>
<h3 id="&#x7F16;&#x5199;shell&#x811A;&#x672C;&#xFF1A;&#x65E0;&#x5BC6;&#x7801;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5230;EC2-web-nginx&#x5B9E;&#x4F8B;"><a href="#&#x7F16;&#x5199;shell&#x811A;&#x672C;&#xFF1A;&#x65E0;&#x5BC6;&#x7801;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5230;EC2-web-nginx&#x5B9E;&#x4F8B;" class="headerlink" title="&#x7F16;&#x5199;shell&#x811A;&#x672C;&#xFF1A;&#x65E0;&#x5BC6;&#x7801;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5230;EC2: web-nginx&#x5B9E;&#x4F8B;"></a>&#x7F16;&#x5199;shell&#x811A;&#x672C;&#xFF1A;&#x65E0;&#x5BC6;&#x7801;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5230;EC2: web-nginx&#x5B9E;&#x4F8B;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">//1.&#x8FDC;&#x7A0B;&#x8FDB;&#x5165;EC2</span><br><span class="line">ssh -i &quot;web-nginx-rsa-pair.pem&quot; ec2-user@18.163.150.205</span><br><span class="line"></span><br><span class="line">//2.&#x5207;&#x6362;&#x7528;&#x6237;&#x4E3A;root</span><br><span class="line">sudo -i</span><br><span class="line"></span><br><span class="line">//3.&#x9759;&#x6001;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x6743;&#x9650;&#x6539;&#x4E3A;777</span><br><span class="line">chmod 777 /usr/share/nginx/html</span><br><span class="line"></span><br><span class="line">//4.&#x7136;&#x540E;&#x9000;&#x51FA;EC2 &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x8FDB;&#x5165;MacOS&#x7EC8;&#x7AEF;&#xFF1A;</span><br><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">//5.&#x6D4B;&#x8BD5;&#x4E0B;&#x662F;&#x5426;&#x80FD;&#x591F;&#x65E0;&#x5BC6;&#x7801;&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash remote-access.sh</span></span><br><span class="line">ec2-user</span><br><span class="line">/home/ec2-user</span><br><span class="line">&#x603B;&#x7528;&#x91CF; 8</span><br><span class="line">drwxrwxrwx 2 root root  40 7&#x6708;  19 08:20 .</span><br><span class="line">drwxr-xr-x 3 root root  18 7&#x6708;  19 08:20 ..</span><br><span class="line">-rw-r--r-- 1 root root 497 4&#x6708;  11 17:22 50x.html</span><br><span class="line">-rw-r--r-- 1 root root 615 4&#x6708;  11 17:22 index.html</span><br><span class="line">ec2.web-nginx.1.png                                                                                                 100%  216KB   1.0MB/s   00:00    </span><br><span class="line">Upload successfully</span><br></pre></td></tr></table></figure>

<p>remote-access.sh &#x5185;&#x5BB9;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">REMOTE_USERNAME=ec2-user</span><br><span class="line">REMOTE_IP=18.163.150.205</span><br><span class="line">HTML_DIR=/usr/share/nginx/html</span><br><span class="line"></span><br><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">ssh -i &quot;web-nginx-rsa-pair.pem&quot; ${REMOTE_USERNAME}@${REMOTE_IP} -o &quot;StrictHostKeyChecking no&quot; &quot;whoami; pwd; ls -al /${HTML_DIR}&quot;</span><br><span class="line"></span><br><span class="line">scp -i &quot;web-nginx-rsa-pair.pem&quot; ./ec2.web-nginx.1.png ${REMOTE_USERNAME}@${REMOTE_IP}:${HTML_DIR}</span><br><span class="line"></span><br><span class="line">echo &quot;Upload successfully&quot;</span><br></pre></td></tr></table></figure>

<h3 id="nginx&#x914D;&#x7F6E;&#x57DF;&#x540D;"><a href="#nginx&#x914D;&#x7F6E;&#x57DF;&#x540D;" class="headerlink" title="nginx&#x914D;&#x7F6E;&#x57DF;&#x540D;"></a>nginx&#x914D;&#x7F6E;&#x57DF;&#x540D;</h3><p>&#x4E8C;&#x7EA7;&#x57DF;&#x540D;&#xFF1A;<code>uat-mta-swappie.ahsdevice.com</code> A Record: <code>18.163.150.205</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">//1.&#x8FDC;&#x7A0B;&#x8FDB;&#x5165;EC2</span><br><span class="line">ssh -i &quot;web-nginx-rsa-pair.pem&quot; ec2-user@18.163.150.205</span><br><span class="line"></span><br><span class="line">sudo -i</span><br><span class="line"></span><br><span class="line">cd /etc/nginx/conf.d</span><br><span class="line"></span><br><span class="line">touch uat-mta-swappie.conf</span><br><span class="line"></span><br><span class="line">vi uat-mta-swappie.conf</span><br><span class="line">&#x52A0;&#x5165;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF0C;:wq &#x4FDD;&#x5B58;</span><br><span class="line"></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>


<p>uat-mta-swappie.conf &#x5185;&#x5BB9;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server {</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  uat-mta-swappie.ahsdevice.com;</span><br><span class="line"></span><br><span class="line">    location / {</span><br><span class="line">        root   /usr/share/nginx/html/swappie;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        try_files $uri $uri/ /index.html;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html {</span><br><span class="line">        root   /usr/share/nginx/html/swappie;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x521B;&#x5EFA;LB-uat-mta-web-lb"><a href="#&#x521B;&#x5EFA;LB-uat-mta-web-lb" class="headerlink" title="&#x521B;&#x5EFA;LB: uat-mta-web-lb"></a>&#x521B;&#x5EFA;LB: uat-mta-web-lb</h3><h4 id="1-&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;"><a href="#1-&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;" class="headerlink" title="1.&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;"></a>1.&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;</h4><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.3.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.4.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.5.png"></p>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.5.1.png"></p>
<ol start="6">
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.6.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.7.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/uat-mta-web-lb.8.png"></p>
</li>
</ol>
<h4 id="2-&#x914D;&#x7F6E;HTTP&#x91CD;&#x5B9A;&#x5411;&#x5230;HTTPS"><a href="#2-&#x914D;&#x7F6E;HTTP&#x91CD;&#x5B9A;&#x5411;&#x5230;HTTPS" class="headerlink" title="2.&#x914D;&#x7F6E;HTTP&#x91CD;&#x5B9A;&#x5411;&#x5230;HTTPS"></a>2.&#x914D;&#x7F6E;HTTP&#x91CD;&#x5B9A;&#x5411;&#x5230;HTTPS</h4><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/http-https.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/http-https.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-ec2-nginx/http-https.3.png"></p>
</li>
</ol>
<h2 id="7-&#x521B;&#x5EFA;-xxl-job-&#x5B9E;&#x4F8B;"><a href="#7-&#x521B;&#x5EFA;-xxl-job-&#x5B9E;&#x4F8B;" class="headerlink" title="7.&#x521B;&#x5EFA; xxl-job &#x5B9E;&#x4F8B;"></a>7.&#x521B;&#x5EFA; xxl-job &#x5B9E;&#x4F8B;</h2><h3 id="1-&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x6B65;&#x9AA4;"><a href="#1-&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x6B65;&#x9AA4;" class="headerlink" title="1.&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x6B65;&#x9AA4;"></a>1.&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x6B65;&#x9AA4;</h3><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.3.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.4.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.5.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.6.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.7.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job.8.png"></p>
</li>
</ol>
<h3 id="2-&#x4E3A;-EC2-xxl-job-instance-&#x5206;&#x914D;&#x5F39;&#x6027;IP"><a href="#2-&#x4E3A;-EC2-xxl-job-instance-&#x5206;&#x914D;&#x5F39;&#x6027;IP" class="headerlink" title="2.&#x4E3A; EC2: xxl-job-instance &#x5206;&#x914D;&#x5F39;&#x6027;IP"></a>2.&#x4E3A; EC2: xxl-job-instance &#x5206;&#x914D;&#x5F39;&#x6027;IP</h3><p>&#x56FE;&#x7565;</p>
<p>&#x5F97;&#x5230;&#x5F39;&#x6027;IP&#xFF1A;??.???.???.?</p>
<h3 id="3-&#x5F39;&#x6027;IP&#x548C;EC2-xxl-job-instance&#x5B9E;&#x4F8B;&#x5173;&#x8054;"><a href="#3-&#x5F39;&#x6027;IP&#x548C;EC2-xxl-job-instance&#x5B9E;&#x4F8B;&#x5173;&#x8054;" class="headerlink" title="3.&#x5F39;&#x6027;IP&#x548C;EC2:xxl-job-instance&#x5B9E;&#x4F8B;&#x5173;&#x8054;"></a>3.&#x5F39;&#x6027;IP&#x548C;EC2:xxl-job-instance&#x5B9E;&#x4F8B;&#x5173;&#x8054;</h3><p>&#x56FE;&#x7565;</p>
<p>&#x5F39;&#x6027;IP&#xFF1A;<code>??.???.???.?</code> &#x548C; EC2&#x5B9E;&#x4F8B;&#xFF1A;<code>xxl-job-instance</code> &#x5173;&#x8054;&#x4E86;&#x540E;&#xFF0C;ping &#x4E0B;&#x8BD5;&#x8BD5;&#xFF1A;
&#x3000;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">% </span><span class="language-bash">ping ??.???.???.?</span></span><br><span class="line">PING ??.???.???.? (??.???.???.?): 56 data bytes</span><br><span class="line">64 bytes from ??.???.???.?: icmp_seq=0 ttl=235 time=52.455 ms</span><br><span class="line">64 bytes from ??.???.???.?: icmp_seq=1 ttl=235 time=32.616 ms</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="4-&#x4F7F;&#x7528;&#x5F39;&#x6027;IP&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;EC2-xxl-job-instance&#x5B9E;&#x4F8B;"><a href="#4-&#x4F7F;&#x7528;&#x5F39;&#x6027;IP&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;EC2-xxl-job-instance&#x5B9E;&#x4F8B;" class="headerlink" title="4.&#x4F7F;&#x7528;&#x5F39;&#x6027;IP&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;EC2:xxl-job-instance&#x5B9E;&#x4F8B;"></a>4.&#x4F7F;&#x7528;&#x5F39;&#x6027;IP&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;EC2:xxl-job-instance&#x5B9E;&#x4F8B;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">chmod 400 xxl-job-rsa-pair.pem</span><br><span class="line"></span><br><span class="line">ssh -i &quot;xxl-job-rsa-pair.pem&quot; ec2-user@??.???.???.?</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;"><a href="#5-&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;" class="headerlink" title="5.&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;"></a>5.&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x65F6;&#x533A;</h3><p>&#x7528;&#x4EE5;&#x4E0A;&#x5F39;&#x6027;IP &#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x66F4;&#x6539;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x533A;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">date</span></span></span><br><span class="line">2023&#x5E74; 07&#x6708; 21&#x65E5; &#x661F;&#x671F;&#x4E94; 01:49:28 UTC</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl</span></span><br><span class="line">      Local time: &#x4E94; 2023-07-21 01:50:49 UTC</span><br><span class="line">  Universal time: &#x4E94; 2023-07-21 01:50:49 UTC</span><br><span class="line">        RTC time: &#x4E94; 2023-07-21 01:50:50</span><br><span class="line">       Time zone: n/a (UTC, +0000)</span><br><span class="line">     NTP enabled: yes</span><br><span class="line">NTP synchronized: yes</span><br><span class="line"> RTC in local TZ: no</span><br><span class="line">      DST active: n/a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl set-timezone Asia/Shanghai</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">timedatectl</span></span><br><span class="line">      Local time: &#x4E94; 2023-07-21 09:51:26 CST</span><br><span class="line">  Universal time: &#x4E94; 2023-07-21 01:51:26 UTC</span><br><span class="line">        RTC time: &#x4E94; 2023-07-21 01:51:26</span><br><span class="line">       Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line">     NTP enabled: yes</span><br><span class="line">NTP synchronized: yes</span><br><span class="line"> RTC in local TZ: no</span><br><span class="line">      DST active: n/a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">date</span></span></span><br><span class="line">2023&#x5E74; 07&#x6708; 21&#x65E5; &#x661F;&#x671F;&#x4E94; 09:51:43 CST</span><br></pre></td></tr></table></figure>

<h3 id="6-&#x5728;EC2-xxl-job-instance-&#x4E0A;&#xFF0C;&#x90E8;&#x7F72;tomcat-&#x548C;-xxl-job-admin-war&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;"><a href="#6-&#x5728;EC2-xxl-job-instance-&#x4E0A;&#xFF0C;&#x90E8;&#x7F72;tomcat-&#x548C;-xxl-job-admin-war&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;" class="headerlink" title="6.&#x5728;EC2: xxl-job-instance &#x4E0A;&#xFF0C;&#x90E8;&#x7F72;tomcat &#x548C; xxl-job-admin.war&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;"></a>6.&#x5728;EC2: xxl-job-instance &#x4E0A;&#xFF0C;&#x90E8;&#x7F72;tomcat &#x548C; xxl-job-admin.war&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;</h3><h4 id="1-&#x4E0A;&#x4F20;tomcat&#x3001;war&#x5230;EC2&#x5B9E;&#x4F8B;"><a href="#1-&#x4E0A;&#x4F20;tomcat&#x3001;war&#x5230;EC2&#x5B9E;&#x4F8B;" class="headerlink" title="1.&#x4E0A;&#x4F20;tomcat&#x3001;war&#x5230;EC2&#x5B9E;&#x4F8B;"></a>1.&#x4E0A;&#x4F20;tomcat&#x3001;war&#x5230;EC2&#x5B9E;&#x4F8B;</h4><p>MacOS&#x4E0A;&#xFF0C;&#x76EE;&#x5F55;&#xFF1A;<code>/Users/xiexugang127580/myprojects/aws/uat/mta-swappie</code>&#x4E0B;&#xFF0C;<br>&#x51C6;&#x5907;&#xFF1A;<code>apache-tomcat-8.5.86.zip</code>&#x3001;<code>jdk-8u202-linux-x64.tar.gz</code>&#x3001;<code>xxl-job-admin.war</code></p>
<p>upload-xxl-job.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">REMOTE_USERNAME=ec2-user</span><br><span class="line">REMOTE_IP=??.???.???.?</span><br><span class="line">APP_DIR=/app</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MacOS&#x4E0A;&#xFF0C;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF1A;ssh -i <span class="string">&quot;xxl-job-rsa-pair.pem&quot;</span> ec2-user@??.???.???.?</span></span><br><span class="line">cd /Users/xiexugang127580/myprojects/aws/uat/mta-swappie</span><br><span class="line"></span><br><span class="line">ssh -i &quot;xxl-job-rsa-pair.pem&quot; ${REMOTE_USERNAME}@${REMOTE_IP} -o &quot;StrictHostKeyChecking no&quot; &quot;whoami; pwd; ls -al /app;&quot;</span><br><span class="line"></span><br><span class="line">scp -i &quot;xxl-job-rsa-pair.pem&quot; ./jdk-8u202-linux-x64.tar.gz ${REMOTE_USERNAME}@${REMOTE_IP}:${APP_DIR}</span><br><span class="line"></span><br><span class="line">scp -i &quot;xxl-job-rsa-pair.pem&quot; ./apache-tomcat-8.5.86.zip ${REMOTE_USERNAME}@${REMOTE_IP}:${APP_DIR}</span><br><span class="line"></span><br><span class="line">scp -i &quot;xxl-job-rsa-pair.pem&quot; .//xxl-job-1.9.1-uat/xxl-job-admin/target/xxl-job-admin.war ${REMOTE_USERNAME}@${REMOTE_IP}:${APP_DIR}</span><br></pre></td></tr></table></figure>

<p>&#x6267;&#x884C;&#x5B8C;&#x6BD5;<code>upload-xxl-job.sh</code>&#xFF0C;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x8FDB;&#x5165;EC2&#xFF1A;<br><code>ssh -i &quot;xxl-job-rsa-pair.pem&quot; ec2-user@??.???.???.?</code><br><code>sudo -i</code> //&#x5207;&#x6362;&#x6210;root&#x7528;&#x6237;&#x64CD;&#x4F5C;</p>
<h4 id="2-&#x914D;&#x7F6E;jdk"><a href="#2-&#x914D;&#x7F6E;jdk" class="headerlink" title="2.&#x914D;&#x7F6E;jdk"></a>2.&#x914D;&#x7F6E;jdk</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sudo -i</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chown</span> -R root:root /app</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> -R 755 /app</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /app</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tar -zxvf jdk-8u202-linux-x64.tar.gz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi /etc/profile</span></span><br><span class="line"></span><br><span class="line">&#x672B;&#x5C3E;&#x52A0;&#x4E0A;&#xFF1A;</span><br><span class="line">JAVA_HOME=/app/jdk1.8.0_202</span><br><span class="line">JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br><span class="line">export JAVA_HOME JRE_HOME PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span> /etc/profile</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">java -version</span></span><br><span class="line">java version &quot;1.8.0_202&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_202-b08)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.202-b08, mixed mode)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="3-&#x914D;&#x7F6E;tomcat"><a href="#3-&#x914D;&#x7F6E;tomcat" class="headerlink" title="3.&#x914D;&#x7F6E;tomcat"></a>3.&#x914D;&#x7F6E;tomcat</h4><p>&#x89E3;&#x538B;tomcat&#xFF0C;&#x5C06; <code>xxl-job-admin.war</code> &#x90E8;&#x7F72;&#x5230;webapps&#x4E0B;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /app</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">unzip apache-tomcat-8.5.86.zip</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> apache-tomcat-8.5.86 tomcat</span></span><br></pre></td></tr></table></figure>

<p>&#x5728;<code>catalina.sh</code>&#x4E2D;&#x52A0;&#x5165;<code>JAVA_HOME</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> tomcat/bin</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi catalina.sh</span></span><br><span class="line">&#x7B2C;3&#x884C;&#xFF0C;&#x52A0;&#x5165;&#xFF1A;</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/app/jdk1.8.0_202</span><br><span class="line"></span><br><span class="line">:wq</span><br></pre></td></tr></table></figure>




<p>&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi /etc/systemd/system/tomcat.service</span></span><br><span class="line"></span><br><span class="line">&#x52A0;&#x5165;&#xFF1A;</span><br><span class="line">[Unit]</span><br><span class="line">Description=Tomcat8.5</span><br><span class="line">After=syslog.target network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=oneshot</span><br><span class="line">ExecStart=/app/tomcat/bin/startup.sh</span><br><span class="line">ExecStop=/app/tomcat/bin/shutdown.sh</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">RemainAfterExit=yes</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x6267;&#x884C;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable tomcat</span><br><span class="line"></span><br><span class="line">chmod -R 755 tomcat</span><br><span class="line"></span><br><span class="line">systemctl start tomcat</span><br><span class="line">systemctl status tomcat</span><br></pre></td></tr></table></figure>

<p>&#x6D4F;&#x89C8;&#x5668;&#x9A8C;&#x8BC1;&#xFF1A;<code>http://??.???.???.?:8080</code></p>
<p>&#x90E8;&#x7F72; <code>xxl-job-admin</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop tomcat</span><br><span class="line">rm -rf /app/tomcat/webapps/*</span><br><span class="line"></span><br><span class="line">cp /app/xxl-job-admin.war /app/tomcat/webapps/</span><br><span class="line"></span><br><span class="line">chmod -R 755 tomcat</span><br><span class="line"></span><br><span class="line">systemctl start tomcat</span><br><span class="line"></span><br><span class="line">tail -fn 800 /app/tomcat/logs/catalina.out</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>xxl-job-admin &#x63A7;&#x5236;&#x53F0;&#xFF1A;<br><code>http://??.???.???.?:8080/xxl-job-admin</code><br><code>admin / 123456</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job-admin.1.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/ws-uat-ec2-xxl-job/xxl-job-admin2.png"></p>
<h2 id="8-&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;RDS-mysql-5-7"><a href="#8-&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;RDS-mysql-5-7" class="headerlink" title="8.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;RDS (mysql-5.7)"></a>8.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;RDS (mysql-5.7)</h2><h3 id="&#x524D;&#x63D0;&#x51C6;&#x5907;&#xFF1A;"><a href="#&#x524D;&#x63D0;&#x51C6;&#x5907;&#xFF1A;" class="headerlink" title="&#x524D;&#x63D0;&#x51C6;&#x5907;&#xFF1A;"></a>&#x524D;&#x63D0;&#x51C6;&#x5907;&#xFF1A;</h3><h4 id="1-&#x521B;&#x5EFA;&#x53C2;&#x6570;&#x7EC4;"><a href="#1-&#x521B;&#x5EFA;&#x53C2;&#x6570;&#x7EC4;" class="headerlink" title="1.&#x521B;&#x5EFA;&#x53C2;&#x6570;&#x7EC4;"></a>1.&#x521B;&#x5EFA;&#x53C2;&#x6570;&#x7EC4;</h4><p>&#x8FDB;&#x5165;AWS RDS &#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;&#x9875;&#x9762;&#xFF0C;&#x627E;&#x5230;&#x53C2;&#x6570;&#x7EC4;&#xFF0C;&#x8FDB;&#x5165;&#x53C2;&#x6570;&#x7EC4;&#x9875;&#x9762;&#xFF0C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x7EC4;&#xFF1A;<code>mysql57-parameter-group</code>&#xFF0C;&#x7CFB;&#x5217;&#xFF1A;<code>mysql5.7</code>&#xFF0C;&#x7C7B;&#x578B;&#x548C;&#x63CF;&#x8FF0;&#x968F;&#x4FBF;&#x5199;&#x3002;<br>&#x65B0;&#x5EFA;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x70B9;&#x51FB;&#x8FD9;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x7EC4;&#xFF0C;&#x5728;&#x53C2;&#x6570;&#x91CC;&#x627E;&#x5230;&#xFF1A;<br>1.<code>tx_isolation</code>&#xFF0C;&#x503C;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;<code>READ-COMMITTED</code><br>2.<code>max_allowed_packet</code>&#xFF0C;&#x503C;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;<code>33554432</code><br>3.<code>time_zone</code>&#xFF0C;&#x503C;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;<code>Asia/Shanghai</code></p>
<blockquote>
<p>&#x5982;&#x679C;&#x65B0;&#x5EFA;&#x4E86;&#x53C2;&#x6570;&#x7EC4;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x90E8;&#x5206;&#x53C2;&#x6570;&#x5FD8;&#x8BB0;&#x8BBE;&#x7F6E;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;mysql&#x5B9E;&#x4F8B;&#x521B;&#x5EFA;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x8FDB;&#x5165;&#x53C2;&#x6570;&#x7EC4;&#x66F4;&#x6539;&#xFF0C;&#x66F4;&#x6539;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x91CD;&#x542F;&#x4E0B;mysql&#x5B9E;&#x4F8B;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
</blockquote>
<p>mysql&#x5B9E;&#x4F8B;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FDB;&#x5165;&#x53C2;&#x6570;&#x7EC4;&#x66F4;&#x6539;&#xFF1A;</p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.21-%E8%AE%BE%E7%BD%AEisolation.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.22-%E8%AE%BE%E7%BD%AEisolation.2.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.23-%E8%AE%BE%E7%BD%AEisolation.3.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.24-%E8%AE%BE%E7%BD%AEisolation.4.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.25.png"></p>
<h4 id="2-&#x521B;&#x5EFA;VPC&#x5B89;&#x5168;&#x7EC4;"><a href="#2-&#x521B;&#x5EFA;VPC&#x5B89;&#x5168;&#x7EC4;" class="headerlink" title="2.&#x521B;&#x5EFA;VPC&#x5B89;&#x5168;&#x7EC4;"></a>2.&#x521B;&#x5EFA;VPC&#x5B89;&#x5168;&#x7EC4;</h4><p>&#x8FDB;&#x5165;&#x7F51;&#x8DEF;&#x4E0E;&#x5B89;&#x5168;&#x2013;&#x5B89;&#x5168;&#x7EC4;&#xFF0C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x5B89;&#x5168;&#x7EC4;&#xFF1A;ahsOffice&#xFF0C;&#x65B0;&#x5EFA;3&#x4E2A;&#x5165;&#x7AD9;&#x89C4;&#x5219;&#x548C;1&#x4E2A;&#x51FA;&#x6218;&#x89C4;&#x5219;&#xFF1A;<br>&#x56FE;</p>
<h4 id="3-&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF1A;uat-mta"><a href="#3-&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF1A;uat-mta" class="headerlink" title="3.&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF1A;uat-mta"></a>3.&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF1A;uat-mta</h4><ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.3.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.4.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.5.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.6.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.7.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.8.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.9.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.10.png"></p>
</li>
</ol>
<p>11.&#x6570;&#x636E;&#x5E93;&#x53C2;&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x91CC;&#x8981;&#x9009;&#x62E9;&#x4E8B;&#x5148;&#x521B;&#x5EFA;&#x597D;&#x7684;&#xFF1A;<code>mysql57-parameter-group</code>&#xFF0C;&#x622A;&#x56FE;&#x91CC;&#x7684;&#x6CA1;&#x9009;&#x62E9;&#x597D;<br><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.11.png"></p>
<ol start="12">
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.12.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.13.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.14.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.15.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.16.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-rds/rds.20.png"></p>
</li>
</ol>
<h4 id="4-&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x53F7;&#x548C;&#x5BC6;&#x7801;&#x3001;&#x521B;&#x5EFA;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5BFC;&#x5165;&#x6570;&#x636E;"><a href="#4-&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x53F7;&#x548C;&#x5BC6;&#x7801;&#x3001;&#x521B;&#x5EFA;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5BFC;&#x5165;&#x6570;&#x636E;" class="headerlink" title="4.&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x53F7;&#x548C;&#x5BC6;&#x7801;&#x3001;&#x521B;&#x5EFA;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5BFC;&#x5165;&#x6570;&#x636E;"></a>4.&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x53F7;&#x548C;&#x5BC6;&#x7801;&#x3001;&#x521B;&#x5EFA;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5BFC;&#x5165;&#x6570;&#x636E;</h4><h5 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h5><p>&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#xFF1A;uat-mta<br>uat-mta.cocpnpwzmuuo.ap-east-1.rds.amazonaws.com<br>3306<br>root<br>password????</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="variable">@GLOBAL</span>.tx_isolation, @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line">@<span class="variable">@GLOBAL</span>.tx_isolation<span class="operator">|</span>@<span class="variable">@tx</span>_isolation<span class="operator">|</span></span><br><span class="line"><span class="comment">---------------------+--------------+</span></span><br><span class="line">READ<span class="operator">-</span>COMMITTED       <span class="operator">|</span>READ<span class="operator">-</span>COMMITTED<span class="operator">|</span></span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x662F; RC &#x4E86;</p>
<h5 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h5><p>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;: <code>mta_swappie_uat</code> &#x548C; <code>xxl_job</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mta_swappie_uat` <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `xxl_job` <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br></pre></td></tr></table></figure>

<h5 id="3-&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x6237;"><a href="#3-&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x6237;" class="headerlink" title="3.&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x6237;"></a>3.&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x8D26;&#x6237;</h5><p>1.&#x4E3A;&#x6570;&#x636E;&#x5E93;&#xFF1A;<code>mta_swappie_uat</code>&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;&#xFF1A;<code>swappie_uat</code>&#xFF0C;&#x5BC6;&#x7801;&#xFF1A;<code>uat_qwert12345</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&apos;swappie_uat&apos;</span>@<span class="string">&apos;%&apos;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&apos;uat_qwert12345&apos;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span>, <span class="keyword">UPDATE</span>, <span class="keyword">DELETE</span> <span class="keyword">ON</span> mta_swappie_uat.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&apos;swappie_uat&apos;</span>@<span class="string">&apos;%&apos;</span>;</span><br></pre></td></tr></table></figure>

<p>2.&#x4E3A;&#x6570;&#x636E;&#x5E93;&#xFF1A;<code>xxl_job</code>&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;&#xFF1A;<code>xxl_job_user</code>&#xFF0C;&#x5BC6;&#x7801;&#xFF1A;<code>xxl_job_user_qwert12345</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &apos;xxl_job_user&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxl_job_user_qwert12345&apos;;</span><br><span class="line">GRANT SELECT, INSERT, UPDATE, DELETE ON xxl_job.* TO &apos;xxl_job_user&apos;@&apos;%&apos;;</span><br></pre></td></tr></table></figure>

<h5 id="4-&#x4ECE;GCP-UAT&#x73AF;&#x5883;&#xFF0C;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF1A;"><a href="#4-&#x4ECE;GCP-UAT&#x73AF;&#x5883;&#xFF0C;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF1A;" class="headerlink" title="4.&#x4ECE;GCP UAT&#x73AF;&#x5883;&#xFF0C;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF1A;"></a>4.&#x4ECE;GCP UAT&#x73AF;&#x5883;&#xFF0C;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF1A;</h5><p>1.mta_swappie_uat &#x7684;&#x8868;&#x7ED3;&#x6784;&#x548C;&#x6570;&#x636E;<br>2.xxl_job &#x7684;&#x8868;&#x7ED3;&#x6784;&#x548C;&#x6570;&#x636E;</p>
<p>&#x7136;&#x540E;&#x5BFC;&#x5165;&#x5230;AWS RDS &#x4E0A;&#x7684;&#x5BF9;&#x5E94;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x5E93;<br>&#x5728;win10&#x4E0A;&#x64CD;&#x4F5C;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /d C:\Program Files\MySQL\MySQL Server 5.7\bin</span><br><span class="line"></span><br><span class="line">mysql -huat-mta.cocpnpwzmuuo.ap-east-1.rds.amazonaws.com -P3306 -uroot -pZMtDDxtEyomXnpnvc0X3 --default-character-set=utf8mb4 mta_swappie_uat &lt; D:\dev\career\aihuishou\document\GCP&#x8FC1;&#x79FB;&#x5230;AWS\uat\mta_swappie_uat_data_20230720.sql</span><br></pre></td></tr></table></figure>

<p>&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 2006 (HY000): MySQL server has gone away</span><br></pre></td></tr></table></figure>

<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF0C;&#x4FEE;&#x6539;&#x53C2;&#x6570;&#x7EC4;&#xFF1A;<code>mysql57-parameter-group</code>&#xFF0C;&#x627E;&#x5230;&#xFF1A;<code>max_allowed_packet</code>&#xFF0C;&#x503C;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;<code>33554432</code>&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;MySQL Server&#x5373;&#x53EF;&#x751F;&#x6548;&#x3002;</p>
<h2 id="9-&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;ElastiCache-redis-5-0"><a href="#9-&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;ElastiCache-redis-5-0" class="headerlink" title="9.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;ElastiCache (redis-5.0)"></a>9.&#x90E8;&#x7F72;&#x5355;&#x8282;&#x70B9;ElastiCache (redis-5.0)</h2><p>&#x4E0D;&#x7528; <code>Amazon MemoryDB for Redis</code><br>&#x9999;&#x6E2F;MTA&#x7528;&#x7684;&#x662F;&#xFF1A;<code>Amazon ElastiCache for Redis</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x66F4;&#x597D;</p>
<ol>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.1.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.2.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.3.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.4.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.5.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.6.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.7.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.8.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.9.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.10.png"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/XugangXie/xxg-img-repo@main/18.D001.Infrastructure-AWS.1.%E5%88%9B%E5%BB%BAEC2%E5%AE%9E%E4%BE%8B%E3%80%81LB%E3%80%81RDS%E3%80%81ElastiCache/aws-uat-elasticache/redis.11.png"></p>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2023/07/21/18.D001.Infrastructure-AWS%E7%B3%BB%E5%88%97.1.%E5%88%9B%E5%BB%BARDS%E3%80%81ElasticCache/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AWS-EC2/" rel="tag">AWS-EC2</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2023/08/20/18.D002.Infrastructure-AWS%E7%B3%BB%E5%88%97.2.%E9%83%A8%E7%BD%B2EKS-%E9%83%A8%E7%BD%B2Java%E5%BE%AE%E6%9C%8D%E5%8A%A1(%E4%BD%BF%E7%94%A8ALB%20Ingress%20Controller)/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Infrastructure-AWS系列.2.部署EKS-部署Java微服务(使用ALB Ingress Controller)
          
        </div>
      </a>
    
    
      <a href="/2023/06/20/18.C002.Infrastructure-GCP%E7%B3%BB%E5%88%97.gitlab-runner%E5%AE%9E%E7%8E%B0java%E5%BE%AE%E6%9C%8D%E5%8A%A1CICD--4.GCP%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E6%BF%80%E6%B4%BB%E3%80%81%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F%E5%BA%93%E3%80%81%E8%BF%90%E8%A1%8Cpipeline/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Infrastructure-GCP系列.gitlab-runner实现java微服务CICD--4.GCP服务账号激活、创建镜像库、运行pipeline</div>
      </a>
    
  </nav>

  
   
    
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2017-2025
        <i class="ri-heart-fill heart_icon"></i> xugang.xie
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="xugang.xie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://xiexugang.lofter.com">拍照</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>